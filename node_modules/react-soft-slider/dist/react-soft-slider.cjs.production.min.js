"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react"),n=e(r),t=require("react-spring"),i=require("react-use-gesture"),a=e(require("use-resize-observer"));function u(){return(u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}var c=function(e){var c=e.children,s=e.index,o=e.onIndexChange,l=e.className,f=e.style,d=e.slideStyle,g=e.slideClassName,v=e.enabled,h=e.vertical,p=e.indexRange,m=e.slideAlign,y=e.draggedScale,x=e.draggedSpring,b=e.releaseSpring,S=e.trailingSpring,I=e.trailingDelay,w=e.onDragStart,M=e.onDragEnd,R=e.onTap,A="function"==typeof d?d:function(){return d},E=r.useRef(null),j=a({ref:E}),z=j.width,D=j.height,O=h?"y":"x",q=h?D:z,C=p||[0,c.length-1],N=C[0],T=C[1];T=T>0?T:c.length-1+T;var W=r.useRef(s),k=r.useRef(0),P=r.useRef(0),_=r.useRef(new Set),F=r.useRef(0),H=r.useRef(0),L=function(e){e.forEach((function(e){return _.current[e.isIntersecting?"add":"delete"](Number(e.target.getAttribute("data-index")))}));var r=Array.from(_.current).sort();F.current=r[0],H.current=r[r.length-1]},U=r.useRef(null);r.useEffect((function(){return U.current||(U.current=new IntersectionObserver(L)),Array.from(E.current.children).forEach((function(e){return U.current.observe(e)})),function(){return U.current.disconnect()}}),[c.length,E]);var V=t.useSprings(c.length,(function(e){return{x:h?0:k.current,y:h?k.current:0,s:1,zIndex:0,immediate:function(e){return"zIndex"===e}}})),B=V[0],G=V[1];r.useEffect((function(){if(z&&D){if(h){var e=E.current.children[s];k.current=Math.round((D-e.offsetHeight)/2-e.offsetTop)}else{var r=E.current.children[s];k.current=Math.round((z-r.offsetWidth)/2-r.offsetLeft)}if(W.current===s)G((function(e){var r;return(r={})[O]=k.current,r.s=1,r.config=u({},b,{velocity:P.current}),r}));else{var n=s<W.current?-1:1,t=n>0?F.current:H.current;G((function(e){var r;return(r={})[O]=k.current,r.s=1,r.config=b,r.delay=e*n<t*n?0:Math.abs(t-e)*I,r}))}W.current=s}}),[s,G,E,h,O,D,z,b,x,I]);var J=i.useDrag((function(e){var r=e.first,n=e.last,t=e.tap,i=e.vxvy,a=i[0],u=i[1],c=e.delta,l=c[0],f=c[1],d=e.swipe,g=d[0],v=d[1],p=e.movement,m=p[0],A=p[1],E=e.args[0],j=e.memo,z=void 0===j?B[E][O].getValue():j;if(!t){var D,C=h?u:a,_=-Math.sign(h?f:l),L=h?A:m,U=h?v:g;if(r)G((function(e){var r;return(r={})[O]=z+L,r.s=y,r.config=function(r){return r===O&&e===E?x:S},r.zIndex=e===E?10:0,r})),w&&w(E);else if(n)(Math.abs(L)>q/2||0!==U)&&(W.current=(D=T,Math.min(Math.max(W.current+(L>0?-1:1),N),D))),s!==W.current?(P.current=C,requestAnimationFrame((function(){return o(W.current)}))):G((function(){var e;return(e={})[O]=k.current,e.s=1,e.config=b,e})),M&&M(E);else{var V=_>0?F.current:H.current;G((function(e){var r;return(r={})[O]=L+z,r.delay=e*_<V*_||e===E?0:Math.abs(V-e)*I,r.config=function(r){return r===O&&e===E?x:S},r}))}return z}R&&R(E)}),{enabled:v,axis:O,filterTaps:!0}),K=function(e){return{display:"flex",flexWrap:"nowrap",alignItems:"stretch",position:"relative",WebkitUserSelect:"none",userSelect:"none",WebkitTouchCallout:"none",flexDirection:e?"column":"row",touchAction:e?"pan-x":"pan-y"}}(h);return l||(K.width="100%"),n.createElement("div",{ref:E,className:l,style:u({},K,{},f)},B.map((function(e,r){var i,a,s=e[O],o=e.s,l=e.zIndex;return n.createElement(t.animated.div,Object.assign({},J(r),{key:r,"data-index":r,className:g,style:u((i={},i[h?"justifyContent":"alignItems"]=m,i.display="flex",i),A(r),(a={zIndex:l},a[O]=s,a.scale=o,a.willChange="transform",a))}),c[r])})))};c.defaultProps={enabled:!0,vertical:!1,slideAlign:"center",draggedScale:1,draggedSpring:{tension:1200,friction:40},trailingSpring:{tension:120,friction:30},releaseSpring:{tension:120,friction:30},trailingDelay:50},exports.Slider=c;
//# sourceMappingURL=react-soft-slider.cjs.production.min.js.map
